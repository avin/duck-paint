(this["webpackJsonpduck-paint"]=this["webpackJsonpduck-paint"]||[]).push([[0],{166:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(34),o=n.n(r),s=n(73),c=(n(166),n(12)),l=n(81),u=n(82),h=n(83),d=n(22),m={controlPanelIsOpen:!1,mode:"FREE"};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(h.a)(e,(function(e){switch(t.type){case d.b:var n=t.values;e=Object(u.a)({},e,{},n);break;case d.a:e=m}return e}))},v=Object(c.c)({uiSettings:p}),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=[l.a],a=c.d.apply(void 0,[c.a.apply(void 0,n)].concat(t)),i=Object(c.e)(v,e,a);return i},g=n(20),y=n(21),b=9,w=function(){function e(t,n){var a=this;Object(g.a)(this,e),this.isRunning=!1,this.container=null,this.className=null,this.handleKeyDown=function(e){e.which===b&&(a.reset(),a.container.addEventListener("mousedown",a.handleMouseDown))},this.handleMouseDown=function(){a.reset(),a.container.classList.add(a.className),a.container.addEventListener("keydown",a.handleKeyDown)},this.container=t,this.className=n}return Object(y.a)(e,[{key:"isActive",value:function(){return this.isRunning}},{key:"start",value:function(){this.container.addEventListener("mousedown",this.handleMouseDown),this.isRunning=!0}},{key:"stop",value:function(){this.reset(),this.isRunning=!1}},{key:"reset",value:function(){this.container.classList.remove(this.className),this.container.removeEventListener("keydown",this.handleKeyDown),this.container.removeEventListener("mousedown",this.handleMouseDown)}}]),e}();window.isMobile=function(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return!!(e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows())}};return e.any()}();var E=f();new w(document.documentElement,"focus-disabled").start(),o.a.render(i.a.createElement(s.a,{store:E}),document.getElementById("root"))},17:function(e,t,n){e.exports={container:"styles_container__38WTg",topContent:"styles_topContent__2SqIy",bottomContent:"styles_bottomContent__2li2d",button:"styles_button__RdAQ7"}},22:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var a="app/uiSettings/SET_UI_SETTINGS_VALUES",i="app/uiSettings/RESET_UI_SETTINGS"},23:function(e,t,n){e.exports={page:"styles_page__19w24",mainCanvas:"styles_mainCanvas__kTjw6",loadingOverlay:"styles_loadingOverlay__32MjQ",pauseMessage:"styles_pauseMessage__2jkqI",content:"styles_content__1QAy8",pauseMessageAnimation:"styles_pauseMessageAnimation__TPE6V"}},27:function(e,t,n){e.exports={spinner:"styles_spinner__9ROLI",spinnerHead:"styles_spinnerHead__3b4D6",spinnerAnimation:"styles_spinnerAnimation__1jvok","spinner-animation":"styles_spinner-animation__k5LNj"}},37:function(e,t,n){e.exports={header:"styles_header__1pWs-",title:"styles_title__27VLp",logoIcon:"styles_logoIcon__6pOFR",logoAnimation:"styles_logoAnimation__3xzQE"}},38:function(e,t,n){e.exports={buttonsGroup:"styles_buttonsGroup__xwX2i",button:"styles_button__3noC7",active:"styles_active__3H3vc"}},39:function(e,t,n){e.exports={mainLayout:"styles_mainLayout__3FuFV",content:"styles_content__3eaLw",header:"styles_header__32KBX"}},40:function(e,t,n){e.exports={controlPanel:"styles_controlPanel__2g10R",isOpen:"styles_isOpen__2fJPj",openControl:"styles_openControl__3VQ9D"}},41:function(e,t,n){e.exports={openControl:"styles_openControl__15gw1",icon:"styles_icon__30SGB"}},51:function(e,t,n){e.exports={container:"styles_container__2r-jB",appearance:"styles_appearance__USu41",icon:"styles_icon__1SBvQ"}},73:function(e,t,n){"use strict";(function(e){var a=n(0),i=n.n(a),r=n(6),o=n(80),s=n(84);t.a=Object(o.hot)(e)((function(e){var t=e.store;return i.a.createElement(r.a,{store:t},i.a.createElement(s.a,null))}))}).call(this,n(55)(e))},75:function(e,t,n){e.exports={loadingPage:"styles_loadingPage__qcS9u"}},84:function(e,t,n){"use strict";var a=n(0),i=n.n(a),r=n(78),o=n(13),s=n(16),c=n(8),l=n(37),u=n.n(l),h=n(6),d=n(22);function m(e){return{type:d.b,values:e}}var p=n(11),v=n(3),f=n.n(v),g=n(38),y=n.n(g),b=function(e){var t=e.options,n=void 0===t?[]:t,a=e.onSelect,r=e.value;return n.length?i.a.createElement("div",{className:y.a.buttonsGroup},n.map((function(e){var t=e.value,n=e.label;return i.a.createElement("button",{type:"button",key:t,className:Object(c.a)(y.a.button,Object(p.a)({},y.a.active,t===r)),onClick:function(){return a(t)}},n)}))):null};b.protoTypes={options:f.a.array};var w=b,E=[{label:"Drive",value:"DRIVE"},{label:"Paint",value:"FREE"}],C=function(){var e=Object(h.c)((function(e){return e.uiSettings.mode})),t=Object(h.b)(),n=Object(a.useCallback)((function(e){t(m({mode:e}))}),[t]);return i.a.createElement("div",null,i.a.createElement(w,{options:E,onSelect:n,value:e}))};C.protoTypes={};var S=C;function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function O(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var P=i.a.createElement("g",null,i.a.createElement("g",{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)"},i.a.createElement("path",{d:"M3455.5,4911c-730.9-104.8-1374.9-554.6-1725-1203.7c-109.9-207-237.7-339.9-347.6-368c-35.8-10.2-181.4-2.6-324.6,12.8c-557.1,61.3-858.7-92-940.5-477.9c-40.9-201.9-12.8-393.6,94.6-615.9C376,1908.2,866.7,1489.1,1457,1192.7c122.7-61.3,222.3-122.7,222.3-132.9c0-12.8-66.5-66.5-145.7-122.7c-480.4-329.7-920-943-1119.3-1553.8c-166.1-513.7-186.6-1183.2-51.1-1689.2c291.3-1104,1193.5-1934.6,2435.4-2248.9c506-127.8,1543.6-191.7,2292.4-143.1c1671.3,112.4,2875,564.8,3708.1,1395.3c518.8,518.8,851,1124.4,1006.9,1850.2c268.3,1231.8-51.1,2532.6-794.8,3235.3c-214.7,199.3-306.7,253-416.6,232.6c-102.2-20.4-173.8-94.6-355.2-373.1c-230-350.1-444.7-544.3-766.7-690C7018,748,6276.8,702,5627.7,837.4c-97.1,20.4-181.5,38.3-184,38.3c-35.8,0,25.6,107.3,184,319.4c370.6,493.2,480.4,805,483,1392.8c2.6,309.2-7.7,406.3-56.2,587.8c-207,771.8-779.5,1385.1-1525.7,1633C4163.4,4928.9,3815.8,4962.1,3455.5,4911z M3174.4,3178.3c109.9-48.6,255.6-199.3,296.5-301.6c40.9-107.3,28.1-334.8-28.1-439.6C3274,2102.4,2860,2030.9,2584,2286.5c-273.4,253-224.9,677.2,99.7,863.8C2842.2,3239.7,3015.9,3252.4,3174.4,3178.3z M8551.3-517c81.8-40.9,104.8-84.3,104.8-194.2c0-56.2-46-125.2-184-283.7c-935.3-1065.7-1896.2-1771-2806-2062.3c-408.9-130.4-615.9-163.6-1035-163.6c-431.9-2.5-690,38.3-1068.2,166.1c-383.3,127.8-1045.2,483-1180.7,633.8c-66.5,74.1-63.9,217.2,7.7,286.2c92,92,196.8,74.1,414-74.1c569.9-383.3,1213.9-595.4,1814.5-595.4c1144.9,0,2310.2,697.7,3608.5,2164.6C8375-473.6,8428.6-453.1,8551.3-517z"}))),M=function(e){var t=e.svgRef,n=e.title,a=O(e,["svgRef","title"]);return i.a.createElement("svg",x({x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve",fill:"currentColor",ref:t},a),n?i.a.createElement("title",null,n):null,P)},k=i.a.forwardRef((function(e,t){return i.a.createElement(M,x({svgRef:t},e))})),_=(n.p,function(e){var t=e.className;return i.a.createElement("div",{className:Object(c.a)(u.a.header,t)},i.a.createElement("div",{className:u.a.title},i.a.createElement(k,{className:u.a.logoIcon})," ",i.a.createElement("div",null,"Duck Paint")),i.a.createElement(S,null))}),R=n(39),N=n.n(R),A=n(75),T=n.n(A),j=n(27),D=n.n(j),F="#d9822b",I="#bfccd6",V=45,L="M 50,50 m 0,-".concat(V," a ").concat(V,",").concat(V," 0 1 1 0,").concat(90," a ").concat(V,",").concat(V," 0 1 1 0,-").concat(90),z=function(e){var t=V+e/2,n=(50-t).toFixed(2),a=(2*t).toFixed(2);return"".concat(n," ").concat(n," ").concat(a," ").concat(a)},B=function(e){var t=e.size,n=void 0===t?50:t,a=e.headColor,r=void 0===a?F:a,o=e.trackColor,s=void 0===o?I:o,l=e.className;n=Math.max(10,n);var u=Math.min(16,400/n);return i.a.createElement("div",{className:Object(c.a)(D.a.spinner,l)},i.a.createElement("div",{className:D.a.spinnerAnimation},i.a.createElement("svg",{width:n,height:n,strokeWidth:u.toFixed(2),viewBox:z(u)},i.a.createElement("path",{className:D.a.spinnerTrack,d:L,stroke:s}),i.a.createElement("path",{className:D.a.spinnerHead,d:L,pathLength:280,strokeDasharray:"".concat(280," ").concat(280),strokeDashoffset:210,stroke:r}))))};B.protoTypes={size:f.a.number,headColor:f.a.string,trackColor:f.a.string};var Q=B,K=function(){return i.a.createElement("div",{className:T.a.loadingPage,"data-testid":"loading-page"},i.a.createElement(Q,{size:60}))},U=function(e){var t=e.children,n=Object(a.useState)(!0);return Object(s.a)(n,1)[0]?i.a.createElement("div",{className:N.a.mainLayout},i.a.createElement(_,{className:N.a.header}),i.a.createElement("div",{className:N.a.content},t)):i.a.createElement(K,null)},Z=n(14),W=n.n(Z),q=n(1),H=(n(94),n(23)),G=n.n(H),X=n(40),J=n.n(X),Y=n(76),$=n.n(Y);function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ne=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{d:"M293.629,127.806l-5.795-13.739c19.846-44.856,18.53-46.189,14.676-50.08l-25.353-24.77l-2.516-2.12h-2.937 c-1.549,0-6.173,0-44.712,17.48l-14.184-5.719c-18.332-45.444-20.212-45.444-25.58-45.444h-35.765 c-5.362,0-7.446-0.006-24.448,45.606l-14.123,5.734C86.848,43.757,71.574,38.19,67.452,38.19l-3.381,0.105L36.801,65.032 c-4.138,3.891-5.582,5.263,15.402,49.425l-5.774,13.691C0,146.097,0,147.838,0,153.33v35.068c0,5.501,0,7.44,46.585,24.127 l5.773,13.667c-19.843,44.832-18.51,46.178-14.655,50.032l25.353,24.8l2.522,2.168h2.951c1.525,0,6.092,0,44.685-17.516 l14.159,5.758c18.335,45.438,20.218,45.427,25.598,45.427h35.771c5.47,0,7.41,0,24.463-45.589l14.195-5.74 c26.014,11,41.253,16.585,45.349,16.585l3.404-0.096l27.479-26.901c3.909-3.945,5.278-5.309-15.589-49.288l5.734-13.702 c46.496-17.967,46.496-19.853,46.496-25.221v-35.029C340.268,146.361,340.268,144.434,293.629,127.806z M170.128,228.474 c-32.798,0-59.504-26.187-59.504-58.364c0-32.153,26.707-58.315,59.504-58.315c32.78,0,59.43,26.168,59.43,58.315 C229.552,202.287,202.902,228.474,170.128,228.474z"})))),ae=i.a.createElement("g",null),ie=i.a.createElement("g",null),re=i.a.createElement("g",null),oe=i.a.createElement("g",null),se=i.a.createElement("g",null),ce=i.a.createElement("g",null),le=i.a.createElement("g",null),ue=i.a.createElement("g",null),he=i.a.createElement("g",null),de=i.a.createElement("g",null),me=i.a.createElement("g",null),pe=i.a.createElement("g",null),ve=i.a.createElement("g",null),fe=i.a.createElement("g",null),ge=i.a.createElement("g",null),ye=function(e){var t=e.svgRef,n=e.title,a=te(e,["svgRef","title"]);return i.a.createElement("svg",ee({id:"Capa_1",viewBox:"0 0 340.274 340.274",fill:"currentColor",ref:t},a),n?i.a.createElement("title",null,n):null,ne,ae,ie,re,oe,se,ce,le,ue,he,de,me,pe,ve,fe,ge)},be=i.a.forwardRef((function(e,t){return i.a.createElement(ye,ee({svgRef:t},e))})),we=(n.p,n(41)),Ee=n.n(we),Ce=function(e){var t=e.className,n=e.onClick,a=void 0===n?$.a:n,r=e.isOpen;return i.a.createElement("button",{type:"button",className:Object(c.a)(Ee.a.openControl,t,Object(p.a)({},Ee.a.isOpen,r)),onClick:a},i.a.createElement(be,{className:Object(c.a)(Ee.a.icon)}))};Ce.protoTypes={isOpen:f.a.bool};var Se=Ce,xe=function(e){var t=e.isOpen,n=Object(h.b)(),r=Object(a.useCallback)((function(){n(m({controlPanelIsOpen:!t}))}),[t,n]);return i.a.createElement("div",{className:Object(c.a)(J.a.controlPanel,Object(p.a)({},J.a.isOpen,t))},"ControlPanel here",i.a.createElement(Se,{className:J.a.openControl,isOpen:t,onClick:r}))};xe.protoTypes={isOpen:f.a.bool};var Oe=xe,Pe=n(20),Me=n(21),ke=n(36),_e=n.n(ke),Re=n(77),Ne=n.n(Re),Ae=q.Vector3.Zero(),Te=(q.Vector3.Zero(),q.Vector3.Zero(),new q.Quaternion);new q.Vector3(0,1,0);function je(e,t,n,a){t?(!function(e,t,n){var a=Math.acos(q.Vector3.Dot(e,t));q.Vector3.CrossToRef(e,t,Ae),q.Quaternion.RotationAxisToRef(Ae,a,n)}(t,n,Te),Ne()(Te.x)||Te.multiplyToRef(e,a)):q.Quaternion.FromEulerVectorToRef(n,a)}function De(e,t,n){this.x=e,this.y=t,this.z=n}De.prototype.dot2=function(e,t){return this.x*e+this.y*t},De.prototype.dot3=function(e,t,n){return this.x*e+this.y*t+this.z*n};var Fe=[new De(1,1,0),new De(-1,1,0),new De(1,-1,0),new De(-1,-1,0),new De(1,0,1),new De(-1,0,1),new De(1,0,-1),new De(-1,0,-1),new De(0,1,1),new De(0,-1,1),new De(0,1,-1),new De(0,-1,-1)],Ie=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Ve=new Array(512),Le=new Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n=void 0;n=1&t?Ie[t]^255&e:Ie[t]^e>>8&255,Ve[t]=Ve[t+256]=n,Le[t]=Le[t+256]=Fe[n%12]}}(0);Math.sqrt(3),Math.sqrt(3);function ze(e){return e*e*e*(e*(6*e-15)+10)}function Be(e,t,n){return(1-n)*e+n*t}function Qe(e,t){var n=Math.floor(e),a=Math.floor(t);e-=n,t-=a;var i=Le[(n&=255)+Ve[a&=255]].dot2(e,t),r=Le[n+Ve[a+1]].dot2(e,t-1),o=Le[n+1+Ve[a]].dot2(e-1,t),s=Le[n+1+Ve[a+1]].dot2(e-1,t-1),c=ze(e);return Be(Be(i,o,c),Be(r,s,c),ze(t))}var Ke=function(){function e(t){Object(Pe.a)(this,e),this.mainScene=null,this.withParticles=!0,this._isActive=!1,this.minSpeed=2.25,this.maxSpeed=5,this.speed=this.minSpeed,this.index=0,this._tmp={bPos:q.Vector3.Zero(),rayFrom:q.Vector3.Zero(),rayTo:q.Vector3.Zero(),ray:new q.Ray(q.Vector3.Zero(),q.Vector3.Zero(),1.2)},this.angle=0,_e()(this,t),this.init()}return Object(Me.a)(e,[{key:"init",value:function(){var e=this.id,t=this.brushSrc,n=this.mainScene,a=n.scene,i=n.currentMeshOptions.brushInitPointPosition,r=t.clone("brush-".concat(e));this.brush=r;var o=new q.StandardMaterial("brush-material",a);o.specularColor=new q.Color3(0,0,0),o.diffuseColor=this.color,o.emissiveColor=this.color.scale(.75),r.material=o,r.isPickable=!1,this.generalNode=new q.TransformNode("general-node"),this.generalNode.position=new q.Vector3(i[0],i[1],i[2]),this.generalNode.prevPosition=q.Vector3.Zero(),this.generalNode.prevPrevPosition=q.Vector3.Zero(),this.generalNode.rotationQuaternion=new q.Quaternion,this.generalNode.directedRotationQuaternion=new q.Quaternion,this.rotationPivot=new q.TransformNode("rotation-pivot"),this.rotationPivot.position=q.Vector3.Zero(),this.rayPilot=new q.TransformNode("rayPilot"),this.rayPilot.parent=this.rotationPivot,this.rayPilot.position=new q.Vector3(1,0,1),this.cameraNode=new q.TransformNode("camera-node"),this.cameraNode.position=r.position.clone(),this.cameraNode.rotationQuaternion=new q.Quaternion,r.parent=this.generalNode,r.position=new q.Vector3.Zero,r.rotationQuaternion=new q.Quaternion,this.prevPosition=this.generalNode.position,this.direction=new q.Vector3.Zero,this.reset(),this.updateSpeedFactor(),this.withParticles&&this.initParticles()}},{key:"initParticles",value:function(){var e=new q.ParticleSystem("particles",2e3,this.mainScene.scene);this.particleSystem=e,e.particleTexture=new q.Texture("static/assets/textures/flare.png",this.mainScene.scene),e.emitter=this.generalNode,e.color1=this.color,e.color2=new q.Color4(.92,.15,0,1),e.colorDead=new q.Color4(0,0,0,1),e.emitRate=0,this.tuneParticlesSystem(),e.start()}},{key:"reset",value:function(){this.prevNormal=null,this.nextNormal=null,this.quatRot=null,this.isFreeModeActiveDrawing=!1}},{key:"speedUp",value:function(){if(this.speed!==this.maxSpeed){var e=(this.maxSpeed-this.minSpeed)/100;this.speed+=e,this.speed=Math.min(this.speed,this.maxSpeed),this.speed=Math.max(this.speed,this.minSpeed),this.updateSpeedFactor(),this.tuneParticlesSystem()}}},{key:"speedDown",value:function(){if(this.speed!==this.minSpeed){var e=(this.maxSpeed-this.minSpeed)/100;this.speed-=e,this.speed=Math.min(this.speed,this.maxSpeed),this.speed=Math.max(this.speed,this.minSpeed),this.updateSpeedFactor(),this.tuneParticlesSystem()}}},{key:"updateSpeedFactor",value:function(){this.speedFactor=(this.speed-this.minSpeed)/(this.maxSpeed-this.minSpeed),this.mainScene.driveCamera.fov=.8+.5*this.speedFactor}},{key:"tuneParticlesSystem",value:function(){if(this.withParticles){var e,t=this.particleSystem;"DRIVE"===this.mainScene.playMode?e=Math.max(.25,this.speedFactor)-.6:"FREE"===this.mainScene.playMode&&(e=this.isFreeModeActiveDrawing?.6:0),t.emitRate=5500*e,t.particleEmitterType=new q.BoxParticleEmitter(1),t.minLifeTime=.05,t.maxLifeTime=.4,t.maxEmitPower=2*e*5,t.minSize=.1,t.maxSize=.5*e,t.direction1=new q.Vector3(-1,-1,-1),t.direction2=new q.Vector3(1,1,1),t.minEmitBox=new q.Vector3(-.25,-.075,-.25),t.maxEmitBox=new q.Vector3(.25,.075,.25),t.minEmitBox=new q.Vector3.Zero,t.maxEmitBox=new q.Vector3.Zero}}},{key:"update",value:function(){var e=this.brush,t=this.mainScene,n=t.playMode,a=t.timeDiff*this.speed;this.tuneParticlesSystem(),q.Quaternion.SlerpToRef(e.rotationQuaternion,this.generalNode.directedRotationQuaternion,6*a,e.rotationQuaternion),q.Quaternion.SlerpToRef(this.cameraNode.rotationQuaternion,this.generalNode.directedRotationQuaternion,a,this.cameraNode.rotationQuaternion),q.Vector3.LerpToRef(this.cameraNode.position,this.generalNode.position,2*a,this.cameraNode.position),"DRIVE"===n&&(this.mainScene.isPaused||this.updateInDriveMode())}},{key:"updateInDriveMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.mainScene,n=t.activeKeys,a=t.scene,i=t.mainMesh,r=t.timeDiff,o=t.time,s=.02+.3/(3*this.speed);this.isActive?((n.KeyA||n.ArrowLeft)&&(this.angle-=s),(n.KeyD||n.ArrowRight)&&(this.angle+=s),n.KeyW||n.ArrowUp?this.speedUp():this.speedDown()):this.angle+=s*Qe(100*this.index,this.mainScene.time),this.snakeMode&&(this.angle+=.08*Math.sin(20*o)),this.rayPilot.position.x=Math.sin(this.angle+.3*e),this.rayPilot.position.z=Math.cos(this.angle+.3*e);var c=this.speed*r*(2+.25*e),l=this.speed*r;this.nextNormal||(this.nextNormal=new q.Vector3(0,1,0));var u=this._tmp,h=u.rayFrom,d=u.rayTo,m=u.ray,p=u.bPos;this.nextNormal.scaleToRef(c,p),p.addToRef(this.rayPilot.getAbsolutePosition().scale(l),p),p.addToRef(this.generalNode.position,h);var v=this.nextNormal.negate();p.addToRef(v,d),d.normalizeToRef(d),m.origin=h,m.direction=d;var f=a.pickWithRay(m,(function(e){return e===i}));if(f.hit&&(this.handlePickHit(f),this.rotationPivot.rotationQuaternion=this.quatRot,t.drawPoint(f,this.color)),this.generalNode.prevPrevPosition){var g=this.generalNode,y=g.prevPrevPosition,b=g.position,w=Math.abs(b.x-y.x)+Math.abs(b.y-y.y)+Math.abs(b.z-y.z);w===this.moveDiff&&e<10&&this.updateInDriveMode(e+1),this.moveDiff=w}}},{key:"setIsFreeModeActiveDrawing",value:function(e){this.isFreeModeActiveDrawing=e,this.tuneParticlesSystem()}},{key:"handlePointerUp",value:function(){var e=this.mainScene,t=e.scene,n=e.canvas;this.setIsFreeModeActiveDrawing(!1),t.activeCamera.attachControl(n,!0)}},{key:"handlePointerDown",value:function(e){var t=e.event,n=e.pickInfo;if(0===t.button){var a=this.mainScene,i=a.scene,r=a.canvas;n.hit&&(this.setIsFreeModeActiveDrawing(!0),i.activeCamera.detachControl(r)),this.handlePointerMove(e)}}},{key:"handlePointerMove",value:function(e){var t=e.pickInfo,n=this.mainScene.scene;(t=n.pick(n.pointerX,n.pointerY)).hit&&(this.handlePickHit(t),this.isFreeModeActiveDrawing&&this.mainScene.drawPoint(t,this.color))}},{key:"handlePickHit",value:function(e){if(this.generalNode.prevPrevPosition.copyFrom=this.generalNode.prevPosition,this.generalNode.prevPosition.copyFrom(this.generalNode.position),this.generalNode.position.copyFrom(e.pickedPoint),this.generalNode.position.subtractToRef(this.prevPosition,this.direction),this.direction.normalizeToRef(this.direction),this.prevNormal=this.nextNormal,this.nextNormal=e.getNormal(),this.quatRot){je(this.quatRot,this.prevNormal,this.nextNormal,this.quatRot);var t=q.Quaternion.RotationAxis(new q.Vector3(0,1,0),this.angle);this.generalNode.directedRotationQuaternion=this.quatRot.multiply(t).normalize()}else this.quatRot=function(e,t){t=t||new q.Quaternion,Ae.set(e.z,0,-e.x).normalize();var n=Math.acos(e.y);return t=q.Quaternion.RotationAxisToRef(Ae,n,t)}(this.nextNormal,this.quatRot)}},{key:"handleChangePlayMode",value:function(e){switch(e){case"DRIVE":this.brush.setEnabled(!0);break;case"FREE":this.isActive?this.brush.setEnabled(!0):this.brush.setEnabled(!1)}}},{key:"isActive",get:function(){return this._isActive},set:function(e){e&&(this.mainScene.driveCamera.parent=this.cameraNode,this.mainScene.driveArcCamera.target=this.cameraNode.position),this._isActive=e}}]),e}();n(50);function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var Ze=["#08141e","#1D2B53","#7E2553","#008751","#AB5236","#5F574F","#C2C3C7","#FFF1E8","#FF004D","#FFA300","#FFEC27","#00E436","#29ADFF","#83769C","#FF77A8","#FFCCAA"],We=function(){function e(t){Object(Pe.a)(this,e),this.engine=null,this.scene=null,this.playMode="DRIVE",this.mainLight=null,this.activeKeys={},this.time=0,this.timeDiff=0,this.tick=0,this.isStopped=!1,this.isPaused=!1,this.driveCameraMode="CLASSIC",this.mainMeshesCatalogue={duck:{id:"duck",location:"static/assets/scenes/",fileName:"duck.obj",meshIndex:0,scale:[10,10,10],rotation:[0,-Math.PI,0],brushInitPointPosition:[-6.223477418636669,4.193322954756397,.13768080415772133]}},this.visualOptions={clearColor:Ze[0]},_e()(this,t),this.totalBrushes=Number(Ue("count"))||5,this.totalBrushes=Math.max(0,this.totalBrushes)+1,this.lowGraphics=Number(Ue("low"))||0,window.isMobile&&(this.lowGraphics=1),this.textureSize=Number(Ue("size"))||0,this.textureSize||(this.textureSize=window.isMobile?2e3:4e3)}return Object(Me.a)(e,[{key:"initControl",value:function(){var e=this,t=this.scene;t.actionManager=new q.ActionManager(t),t.actionManager.registerAction(new q.ExecuteCodeAction(q.ActionManager.OnKeyDownTrigger,(function(t){e.activeKeys[t.sourceEvent.code]=!0}))),t.actionManager.registerAction(new q.ExecuteCodeAction(q.ActionManager.OnKeyUpTrigger,(function(t){e.activeKeys[t.sourceEvent.code]=!1}))),t.onPointerObservable.add((function(t){"FREE"===e.playMode&&e.brushes[0].handlePointerUp(t)}),q.PointerEventTypes.POINTERUP),t.onPointerObservable.add((function(t){"FREE"===e.playMode&&e.brushes[0].handlePointerDown(t)}),q.PointerEventTypes.POINTERDOWN),t.onPointerObservable.add((function(t){"FREE"===e.playMode&&e.brushes[0].handlePointerMove(t)}),q.PointerEventTypes.POINTERMOVE)}},{key:"initMainMesh",value:function(e){var t,n,a,i,r,o,s,c,l,u,h,d,m,p;return W.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return this.currentMeshOptions=this.mainMeshesCatalogue[e],t=this.currentMeshOptions,n=t.location,a=t.fileName,i=t.meshIndex,r=t.scale,o=t.rotation,v.next=4,W.a.awrap(q.SceneLoader.ImportMeshAsync(null,n,a,this.scene));case 4:s=v.sent,c=s.meshes,l=c[i],this.mainMesh=l,l.bakeTransformIntoVertices(q.Matrix.Scaling(r[0],r[1],r[2])),o[0]&&l.bakeTransformIntoVertices(q.Matrix.RotationX(o[0])),o[1]&&l.bakeTransformIntoVertices(q.Matrix.RotationY(o[1])),o[2]&&l.bakeTransformIntoVertices(q.Matrix.RotationZ(o[2])),u=new q.DynamicTexture("paint-texture",{width:this.textureSize,height:this.textureSize},this.scene),this.meshDrawTexture=u,this.meshDrawTexture.anisotropicFilteringLevel=0,(h=u.getContext()).fillStyle="hsl(0, 0%, 98%)",h.fillRect(0,0,this.textureSize,this.textureSize),u.update(!1),(d=new q.StandardMaterial("front-side-material",this.scene)).emissiveColor=new q.Color3(.35,.4,.4),d.diffuseTexture=u,d.specularPower=1e3,d.specularColor=new q.Color3(.25,.25,.25),l.material=d,m=l.clone("main-mash-back-side"),this.mainMashBackSide=m,(p=new q.StandardMaterial("back-side-material",this.scene)).sideOrientation=q.Material.ClockWiseSideOrientation,p.specularColor=new q.Color3(0,0,0),p.emissiveColor=new q.Color3(.15,.2,.2),p.diffuseTexture=u,p.alpha=.6,m.material=p,m.isPickable=!1,l.subdivide(128),l.createOrUpdateSubmeshesOctree(),m.freezeWorldMatrix(),l.freezeWorldMatrix(),m.doNotSyncBoundingInfo=!0,l.doNotSyncBoundingInfo=!0;case 41:case"end":return v.stop()}}),null,this)}},{key:"drawPointRaw",value:function(e,t){for(var n=e.getTextureCoordinates().x*this.textureSize,a=e.getTextureCoordinates().y*this.textureSize,i=new Uint8ClampedArray(1024),r=0;r<256;r+=1)i[4*r]=~~(255*t.r),i[4*r+1]=~~(255*t.g),i[4*r+2]=~~(255*t.b),i[4*r+3]=255;var o=new ImageData(i,16,16);this.meshDrawTexture.getContext().putImageData(o,n-8,a-8),this.meshDrawTexture.update(!1)}},{key:"drawPoint",value:function(e,t){var n=e.getTextureCoordinates().x*this.textureSize,a=e.getTextureCoordinates().y*this.textureSize,i=this.meshDrawTexture.getContext();t.colorString||(t.colorString="rgb(".concat(~~(255*t.r),",").concat(~~(255*t.g),",").concat(~~(255*t.b),")"));var r=this.textureSize/400;i.fillStyle=t.colorString,i.beginPath(),i.arc(n,a,r,0,2*Math.PI),i.fill()}},{key:"initDriveCamera",value:function(){var e=new q.UniversalCamera("drive-camera",new q.Vector3(0,0,0),this.scene);this.driveCamera=e,e.cameraAcceleration=.05,e.checkCollisions=!1,e.inputs.clear(),e.position.y=5,e.position.z=-5,e.rotation=new q.Vector3(Math.PI/5,.005499999999999996,0)}},{key:"initDriveArcCamera",value:function(){var e=new q.ArcRotateCamera("drive-arc-camera",-7.8836942647442125,.3592756568269219,0,new q.Vector3(0,20,0),this.scene);this.driveArcCamera=e,e.cameraAcceleration=.05,e.zoomOnFactor=.01,e.checkCollisions=!1}},{key:"initFreeCamera",value:function(){var e=new q.ArcRotateCamera("free-camera",.75,1.2,60,q.Vector3.Zero(),this.scene);this.freeCamera=e,e.lowerBetaLimit=null,e.upperBetaLimit=null,e.lowerRadiusLimit=15,e.upperRadiusLimit=100,e.useBouncingBehavior=!0}},{key:"applyRenderPipeline",value:function(){var e=new q.DefaultRenderingPipeline("default-pipeline",!0,this.scene,[this.freeCamera,this.driveCamera,this.driveArcCamera]);this.renderPipeline=e,this.lowGraphics||(e.chromaticAberrationEnabled=!0,e.chromaticAberration.aberrationAmount=15.7,e.chromaticAberration.radialIntensity=.8,e.fxaaEnabled=!0,e.glowLayerEnabled=!0,e.glowLayer.blurKernelSize=16,e.glowLayer.intensity=.1,e.glowLayerEnabled=!0,e.imageProcessingEnabled=!0,e.imageProcessing.contrast=1.1,e.imageProcessing.exposure=1.1,e.imageProcessing.vignetteEnabled=!0,e.imageProcessing.vignetteWeight=.1,e.imageProcessing.vignetteStretch=.1,e.imageProcessing.vignetteCameraFov=.3,e.depthOfFieldEnabled=!0,e.depthOfField.focalLength=2735,e.depthOfField.fStop=16.9,e.depthOfField.focusDistance=7169,e.depthOfField.lensSize=38,e.grainEnabled=!0,e.grain.intensity=2,e.grain.animated=!1)}},{key:"init",value:function(){var e,t,n,a,i,r,o,s,c=this;return W.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=new q.Scene(this.engine),this.scene=e,window.s=e,e.clearColor=q.Color3.FromHexString(this.visualOptions.clearColor),(t=e.createDefaultEnvironment({enableGroundShadow:!1,skyboxSize:200,groundSize:0,skyboxColor:q.Color3.FromHexString(this.visualOptions.clearColor)})).rootMesh.isPickable=!1,t.skybox.isPickable=!1,n=new q.HemisphericLight("Hemi",new q.Vector3(0,1,0),e),this.mainLight=n,n.intensity=.05,this.initFreeCamera(),this.initDriveCamera(),this.initDriveArcCamera(),this.applyRenderPipeline(),this.cameraLight=new q.PointLight("camera-light",new q.Vector3.Zero,e),this.cameraLight.intensity=.43,l.next=18,W.a.awrap(this.initMainMesh("duck"));case 18:for(a=[Ze[8],Ze[9],Ze[11],Ze[12],Ze[13],Ze[14],Ze[15]],this.brushes=[],(i=q.Mesh.CreateBox("brush",.5,e)).bakeTransformIntoVertices(q.Matrix.Translation(0,.25,0)),i.bakeTransformIntoVertices(q.Matrix.Scaling(1,.5,1)),r=0;r<this.totalBrushes;r+=1)o=a[r%a.length],s=q.Color3.FromHexString(o),this.brushes.push(new Ke({mainScene:this,index:r,withParticles:!window.isMobile,color:s,angle:2*Math.PI/this.totalBrushes*r,brushSrc:i}));return this.brushes[0].isActive=!0,this.totalBrushes>=5&&(this.brushes[this.totalBrushes-1].snakeMode=!0),this.initControl(),this.setPlayMode(this.playMode),this.sceneInstrumentation=new q.SceneInstrumentation(this.scene),e.registerBeforeRender((function(){c.update()})),e.registerAfterRender((function(){if(c._realTime=Date.now(),c._prevRealTime){var e=(c._realTime-c._prevRealTime)/1e3;c.time+=e,c.timeDiff=e}c._prevRealTime=c._realTime,c.tick+=1})),l.abrupt("return",e);case 32:case"end":return l.stop()}}),null,this)}},{key:"update",value:function(){this.cameraLight.position=this.scene.activeCamera.globalPosition;for(var e=0;e<this.brushes.length;e+=1)this.brushes[e].update();this.meshDrawTexture.update(!1)}},{key:"render",value:function(){this.scene.render()}},{key:"setPlayMode",value:function(e){switch(this.playMode=e,this.scene.activeCamera&&this.scene.activeCamera.detachControl(this.canvas),e){case"FREE":this.scene.activeCamera=this.freeCamera,this.renderPipeline&&(this.renderPipeline.depthOfFieldEnabled=!1);break;case"DRIVE":"CLASSIC"===this.driveCameraMode?(this.scene.activeCamera=this.driveCamera,this.renderPipeline&&(this.renderPipeline.depthOfFieldEnabled=!this.lowGraphics)):"ARC"===this.driveCameraMode&&(this.scene.activeCamera=this.driveArcCamera,this.renderPipeline&&(this.renderPipeline.depthOfFieldEnabled=!1))}this.scene.activeCamera.attachControl(this.canvas,!0);for(var t=0;t<this.brushes.length;t+=1)this.brushes[t].handleChangePlayMode(this.playMode)}},{key:"changeDriveCameraMode",value:function(e){"DRIVE"===this.playMode&&(e||(e="CLASSIC"===this.driveCameraMode?"ARC":"CLASSIC"),this.driveCameraMode=e,this.setPlayMode(this.playMode))}},{key:"stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._prevRealTime=Date.now(),this.isStopped=e,this.resetActiveKeys()}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._prevRealTime=Date.now(),this.isPaused=e,this.resetActiveKeys()}},{key:"resetActiveKeys",value:function(){var e=this;Object.keys(this.activeKeys).forEach((function(t){return delete e.activeKeys[t]}))}}]),e}();var qe=n(17),He=n.n(qe),Ge=function(e){var t=e.mainSceneRef,n=Object(a.useCallback)((function(){t.current.activeKeys.ArrowUp=!0}),[t]),r=Object(a.useCallback)((function(){t.current.activeKeys.ArrowUp=!1}),[t]),o=Object(a.useCallback)((function(){t.current.activeKeys.ArrowLeft=!0}),[t]),s=Object(a.useCallback)((function(){t.current.activeKeys.ArrowLeft=!1}),[t]),c=Object(a.useCallback)((function(){t.current.activeKeys.ArrowRight=!0}),[t]),l=Object(a.useCallback)((function(){t.current.activeKeys.ArrowRight=!1}),[t]);return i.a.createElement("div",{className:He.a.container},i.a.createElement("div",{className:He.a.topContent},i.a.createElement("div",{role:"presentation",className:He.a.button,onMouseDown:n,onMouseUp:r,onTouchStart:n,onTouchEnd:r})),i.a.createElement("div",{className:He.a.bottomContent},i.a.createElement("div",{role:"presentation",className:He.a.button,onMouseDown:o,onMouseUp:s,onTouchStart:o,onTouchEnd:s}),i.a.createElement("div",{role:"presentation",className:He.a.button,onMouseDown:c,onMouseUp:l,onTouchStart:c,onTouchEnd:l})))};Ge.protoTypes={mainSceneRef:f.a.object};var Xe=Ge,Je=n(51),Ye=n.n(Je);function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function et(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tt=i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("circle",{cx:256,cy:378.5,r:25}),i.a.createElement("path",{d:"M256,0C114.516,0,0,114.497,0,256c0,141.484,114.497,256,256,256c141.484,0,256-114.497,256-256 C512,114.516,397.503,0,256,0z M256,472c-119.377,0-216-96.607-216-216c0-119.377,96.607-216,216-216 c119.377,0,216,96.607,216,216C472,375.377,375.393,472,256,472z"}),i.a.createElement("path",{d:"M256,128.5c-44.112,0-80,35.888-80,80c0,11.046,8.954,20,20,20s20-8.954,20-20c0-22.056,17.944-40,40-40 c22.056,0,40,17.944,40,40c0,22.056-17.944,40-40,40c-11.046,0-20,8.954-20,20v50c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-32.531c34.466-8.903,60-40.26,60-77.469C336,164.388,300.112,128.5,256,128.5z"})))),nt=i.a.createElement("g",null),at=i.a.createElement("g",null),it=i.a.createElement("g",null),rt=i.a.createElement("g",null),ot=i.a.createElement("g",null),st=i.a.createElement("g",null),ct=i.a.createElement("g",null),lt=i.a.createElement("g",null),ut=i.a.createElement("g",null),ht=i.a.createElement("g",null),dt=i.a.createElement("g",null),mt=i.a.createElement("g",null),pt=i.a.createElement("g",null),vt=i.a.createElement("g",null),ft=i.a.createElement("g",null),gt=function(e){var t=e.svgRef,n=e.title,a=et(e,["svgRef","title"]);return i.a.createElement("svg",$e({id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",fill:"currentColor",ref:t},a),n?i.a.createElement("title",null,n):null,tt,nt,at,it,rt,ot,st,ct,lt,ut,ht,dt,mt,pt,vt,ft)},yt=i.a.forwardRef((function(e,t){return i.a.createElement(gt,$e({svgRef:t},e))})),bt=(n.p,function(){var e=Object(h.c)((function(e){return e.uiSettings.mode}));return i.a.createElement("div",{className:Ye.a.container},"DRIVE"===e&&i.a.createElement(i.a.Fragment,null,"Control:",i.a.createElement("b",null,"A")," - Turn left; ",i.a.createElement("b",null,"D")," - Turn right; ",i.a.createElement("b",null,"W")," - Speed up; ",i.a.createElement("b",null,"Tab")," - Change camera"),"FREE"===e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(yt,{className:Ye.a.icon})," Control: ",i.a.createElement("b",null,"Left mouse + move")," - Draw;"," ",i.a.createElement("b",null,"Middle mouse + move")," - Rotate"))});bt.protoTypes={};var wt=bt,Et=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useRef)(null),c=Object(a.useRef)(null),l=Object(a.useRef)(null),u=Object(a.useState)(!0),d=Object(s.a)(u,2),m=d[0],p=d[1],v=Object(h.c)((function(e){return e.uiSettings.mode})),f=Object(a.useRef)(v);Object(a.useEffect)((function(){f.current=v,"DRIVE"===v?p(!0):"FREE"===v&&p(!1)}),[v]),Object(a.useEffect)((function(){!function(){var e,t,n;W.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=o.current,t=new q.Engine(e,!0,{preserveDrawingBuffer:!0,stencil:!0}),l.current=t,n=new We({engine:t,canvas:e}),c.current=n,a.next=7,W.a.awrap(n.init());case 7:r(!0),t.runRenderLoop((function(){n.isStopped||n.render()}));case 9:case"end":return a.stop()}}))}();var e=function(){l.current.resize()};return window.addEventListener("resize",e),function(){l.current.dispose(),window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){n&&c.current.setPlayMode(v)}),[v,n]);var g=function(){var e=Object(a.useState)(document.hasFocus()),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=function(){i(!0)},t=function(){i(!1)};return window.addEventListener("focus",e),window.addEventListener("blur",t),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[i]),n}();Object(a.useEffect)((function(){g||p(!0)}),[g]);var y,b=Object(a.useCallback)((function(e){"Space"!==e.key&&32!==e.which&&"Escape"!==e.key&&27!==e.which||p(!m),"Tab"!==e.key&&9!==e.which||(e.preventDefault(),c.current.changeDriveCameraMode())}),[m]);y=b,Object(a.useEffect)((function(){function e(e){y(e,e.key,32===e.which)}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[y]);var w=Object(a.useCallback)((function(){p(!1)}),[p]);Object(a.useEffect)((function(){c.current.pause(m)}),[m]),Object(a.useEffect)((function(){o.current.focus()}),[m,v]);var E=Object(h.c)((function(e){return e.uiSettings.controlPanelIsOpen}));return i.a.createElement("div",{className:G.a.page},!n&&i.a.createElement("div",{className:G.a.loadingOverlay},i.a.createElement(K,null)),i.a.createElement("canvas",{ref:o,className:G.a.mainCanvas,tabIndex:"0"}),i.a.createElement(Oe,{isOpen:E}),"DRIVE"===v&&window.isMobile&&i.a.createElement(Xe,{mainSceneRef:c}),m&&"DRIVE"===v&&i.a.createElement("div",{className:G.a.pauseMessage,role:"presentation",onClick:w},i.a.createElement("div",{className:G.a.content},window.isMobile?"Tap to start":"Press SPACE to start")),!window.isMobile&&i.a.createElement(wt,null))};Et.protoTypes={};var Ct=Et;t.a=function(){return i.a.createElement(r.a,null,i.a.createElement(U,null,i.a.createElement(o.d,null,i.a.createElement(o.b,{exact:!0,path:"/",component:Ct}),i.a.createElement(o.a,{to:"/"}))))}},85:function(e,t,n){e.exports=n(168)}},[[85,1,2]]]);
//# sourceMappingURL=main.320a4d12.chunk.js.map